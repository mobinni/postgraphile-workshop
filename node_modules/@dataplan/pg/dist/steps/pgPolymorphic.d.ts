import type { ExecutableStep, ExecutionExtra, PolymorphicData, PolymorphicStep } from "grafast";
import { UnbatchedExecutableStep } from "grafast";
import type { GraphQLObjectType } from "graphql";
import type { PgClassExpressionStep } from "./pgClassExpression.js";
import type { PgSelectSingleStep } from "./pgSelectSingle.js";
export interface PgPolymorphicTypeMap<TItemStep extends PgSelectSingleStep<any> | PgClassExpressionStep<any, any>, TTypeSpecifier, TTypeSpecifierStep extends ExecutableStep<TTypeSpecifier> = ExecutableStep<TTypeSpecifier>> {
    [typeName: string]: {
        match(specifier: TTypeSpecifier): boolean;
        plan($specifier: TTypeSpecifierStep, $item: TItemStep): ExecutableStep;
    };
}
export declare class PgPolymorphicStep<TItemStep extends PgSelectSingleStep<any> | PgClassExpressionStep<any, any>, TTypeSpecifier, TTypeSpecifierStep extends ExecutableStep<TTypeSpecifier> = ExecutableStep<TTypeSpecifier>> extends UnbatchedExecutableStep<any> implements PolymorphicStep {
    private possibleTypes;
    static $$export: {
        moduleName: string;
        exportName: string;
    };
    isSyncAndSafe: boolean;
    private typeSpecifierStepId;
    private itemStepId;
    private types;
    constructor($item: TItemStep, $typeSpecifier: TTypeSpecifierStep, possibleTypes: PgPolymorphicTypeMap<TItemStep, TTypeSpecifier, TTypeSpecifierStep>);
    deduplicate(peers: PgPolymorphicStep<any, any, any>[]): PgPolymorphicStep<TItemStep, TTypeSpecifier, TTypeSpecifierStep>[];
    itemPlan(): TItemStep;
    typeSpecifierPlan(): TTypeSpecifierStep;
    planForType(type: GraphQLObjectType): ExecutableStep;
    private getTypeNameFromSpecifier;
    unbatchedExecute(_extra: ExecutionExtra, _item: any, specifier: any): PolymorphicData<string> | null;
}
export declare function pgPolymorphic<TItemStep extends PgSelectSingleStep<any> | PgClassExpressionStep<any, any>, TTypeSpecifier = any, TTypeSpecifierStep extends ExecutableStep<TTypeSpecifier> = ExecutableStep<TTypeSpecifier>>($item: TItemStep, $typeSpecifier: TTypeSpecifierStep, possibleTypes: PgPolymorphicTypeMap<TItemStep, TTypeSpecifier, TTypeSpecifierStep>): PgPolymorphicStep<TItemStep, TTypeSpecifier, TTypeSpecifierStep>;
//# sourceMappingURL=pgPolymorphic.d.ts.map