{"version":3,"file":"dialect.js","names":["Tokenizer","cache","Map","createDialect","options","dialect","get","dialectFromOptions","set","dialectOptions","tokenizer","tokenizerOptions","formatOptions","processDialectFormatOptions","alwaysDenseOperators","onelineClauses","Object","fromEntries","map","name"],"sources":["../src/dialect.ts"],"sourcesContent":["import {\n  DialectFormatOptions,\n  ProcessedDialectFormatOptions,\n} from './formatter/ExpressionFormatter.js';\nimport Tokenizer from './lexer/Tokenizer.js';\nimport { TokenizerOptions } from './lexer/TokenizerOptions.js';\n\nexport interface DialectOptions {\n  tokenizerOptions: TokenizerOptions;\n  formatOptions: DialectFormatOptions;\n}\n\nexport interface Dialect {\n  tokenizer: Tokenizer;\n  formatOptions: ProcessedDialectFormatOptions;\n}\n\nconst cache = new Map<DialectOptions, Dialect>();\n\n/**\n * Factory function for building Dialect objects.\n * When called repeatedly with same options object returns the cached Dialect,\n * to avoid the cost of creating it again.\n */\nexport const createDialect = (options: DialectOptions): Dialect => {\n  let dialect = cache.get(options);\n  if (!dialect) {\n    dialect = dialectFromOptions(options);\n    cache.set(options, dialect);\n  }\n  return dialect;\n};\n\nconst dialectFromOptions = (dialectOptions: DialectOptions): Dialect => ({\n  tokenizer: new Tokenizer(dialectOptions.tokenizerOptions),\n  formatOptions: processDialectFormatOptions(dialectOptions.formatOptions),\n});\n\nconst processDialectFormatOptions = (\n  options: DialectFormatOptions\n): ProcessedDialectFormatOptions => ({\n  alwaysDenseOperators: options.alwaysDenseOperators || [],\n  onelineClauses: Object.fromEntries(options.onelineClauses.map(name => [name, true])),\n});\n"],"mappings":"AAIA,OAAOA,SAAP,MAAsB,sBAAtB;AAaA,MAAMC,KAAK,GAAG,IAAIC,GAAJ,EAAd;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,aAAa,GAAIC,OAAD,IAAsC;EACjE,IAAIC,OAAO,GAAGJ,KAAK,CAACK,GAAN,CAAUF,OAAV,CAAd;;EACA,IAAI,CAACC,OAAL,EAAc;IACZA,OAAO,GAAGE,kBAAkB,CAACH,OAAD,CAA5B;IACAH,KAAK,CAACO,GAAN,CAAUJ,OAAV,EAAmBC,OAAnB;EACD;;EACD,OAAOA,OAAP;AACD,CAPM;;AASP,MAAME,kBAAkB,GAAIE,cAAD,KAA8C;EACvEC,SAAS,EAAE,IAAIV,SAAJ,CAAcS,cAAc,CAACE,gBAA7B,CAD4D;EAEvEC,aAAa,EAAEC,2BAA2B,CAACJ,cAAc,CAACG,aAAhB;AAF6B,CAA9C,CAA3B;;AAKA,MAAMC,2BAA2B,GAC/BT,OADkC,KAEC;EACnCU,oBAAoB,EAAEV,OAAO,CAACU,oBAAR,IAAgC,EADnB;EAEnCC,cAAc,EAAEC,MAAM,CAACC,WAAP,CAAmBb,OAAO,CAACW,cAAR,CAAuBG,GAAvB,CAA2BC,IAAI,IAAI,CAACA,IAAD,EAAO,IAAP,CAAnC,CAAnB;AAFmB,CAFD,CAApC"}