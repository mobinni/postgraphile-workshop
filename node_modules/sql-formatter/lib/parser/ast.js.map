{"version":3,"file":"ast.js","names":["NodeType"],"sources":["../../src/parser/ast.ts"],"sourcesContent":["import { TokenType } from '../lexer/token.js';\n\nexport enum NodeType {\n  statement = 'statement',\n  clause = 'clause',\n  set_operation = 'set_operation',\n  function_call = 'function_call',\n  array_subscript = 'array_subscript',\n  property_access = 'property_access',\n  parenthesis = 'parenthesis',\n  between_predicate = 'between_predicate',\n  case_expression = 'case_expression',\n  case_when = 'case_when',\n  case_else = 'case_else',\n  limit_clause = 'limit_clause',\n  all_columns_asterisk = 'all_columns_asterisk',\n  literal = 'literal',\n  identifier = 'identifier',\n  keyword = 'keyword',\n  parameter = 'parameter',\n  operator = 'operator',\n  comma = 'comma',\n  line_comment = 'line_comment',\n  block_comment = 'block_comment',\n}\n\ninterface BaseNode {\n  leadingComments?: CommentNode[];\n  trailingComments?: CommentNode[];\n}\n\nexport interface StatementNode extends BaseNode {\n  type: NodeType.statement;\n  children: AstNode[];\n  hasSemicolon: boolean;\n}\n\nexport interface ClauseNode extends BaseNode {\n  type: NodeType.clause;\n  nameKw: KeywordNode;\n  children: AstNode[];\n}\n\nexport interface SetOperationNode extends BaseNode {\n  type: NodeType.set_operation;\n  nameKw: KeywordNode;\n  children: AstNode[];\n}\n\nexport interface FunctionCallNode extends BaseNode {\n  type: NodeType.function_call;\n  nameKw: KeywordNode;\n  parenthesis: ParenthesisNode;\n}\n\n// <ident>[<expr>]\nexport interface ArraySubscriptNode extends BaseNode {\n  type: NodeType.array_subscript;\n  array: IdentifierNode | KeywordNode;\n  parenthesis: ParenthesisNode;\n}\n\nexport interface ParenthesisNode extends BaseNode {\n  type: NodeType.parenthesis;\n  children: AstNode[];\n  openParen: string;\n  closeParen: string;\n}\n\n// BETWEEN <expr1> AND <expr2>\nexport interface BetweenPredicateNode extends BaseNode {\n  type: NodeType.between_predicate;\n  betweenKw: KeywordNode;\n  expr1: AstNode[];\n  andKw: KeywordNode;\n  expr2: AstNode[];\n}\n\nexport interface CaseExpressionNode extends BaseNode {\n  type: NodeType.case_expression;\n  caseKw: KeywordNode;\n  endKw: KeywordNode;\n  expr: AstNode[];\n  clauses: (CaseWhenNode | CaseElseNode)[];\n}\n\nexport interface CaseWhenNode extends BaseNode {\n  type: NodeType.case_when;\n  whenKw: KeywordNode;\n  thenKw: KeywordNode;\n  condition: AstNode[];\n  result: AstNode[];\n}\n\nexport interface CaseElseNode extends BaseNode {\n  type: NodeType.case_else;\n  elseKw: KeywordNode;\n  result: AstNode[];\n}\n\n// LIMIT <count>\n// LIMIT <offset>, <count>\nexport interface LimitClauseNode extends BaseNode {\n  type: NodeType.limit_clause;\n  limitKw: KeywordNode;\n  count: AstNode[];\n  offset?: AstNode[];\n}\n\n// The \"*\" operator used in SELECT *\nexport interface AllColumnsAsteriskNode extends BaseNode {\n  type: NodeType.all_columns_asterisk;\n}\n\nexport interface LiteralNode extends BaseNode {\n  type: NodeType.literal;\n  text: string;\n}\n\nexport interface PropertyAccessNode extends BaseNode {\n  type: NodeType.property_access;\n  object: AstNode;\n  property: IdentifierNode | ArraySubscriptNode | AllColumnsAsteriskNode;\n}\n\nexport interface IdentifierNode extends BaseNode {\n  type: NodeType.identifier;\n  text: string;\n}\n\nexport interface KeywordNode extends BaseNode {\n  type: NodeType.keyword;\n  tokenType: TokenType;\n  text: string;\n  raw: string;\n}\n\nexport interface ParameterNode extends BaseNode {\n  type: NodeType.parameter;\n  key?: string;\n  text: string;\n}\n\nexport interface OperatorNode extends BaseNode {\n  type: NodeType.operator;\n  text: string;\n}\n\nexport interface CommaNode extends BaseNode {\n  type: NodeType.comma;\n}\n\nexport interface LineCommentNode extends BaseNode {\n  type: NodeType.line_comment;\n  text: string;\n  precedingWhitespace: string;\n}\n\nexport interface BlockCommentNode extends BaseNode {\n  type: NodeType.block_comment;\n  text: string;\n  precedingWhitespace: string;\n}\n\nexport type CommentNode = LineCommentNode | BlockCommentNode;\n\nexport type AstNode =\n  | ClauseNode\n  | SetOperationNode\n  | FunctionCallNode\n  | ArraySubscriptNode\n  | PropertyAccessNode\n  | ParenthesisNode\n  | BetweenPredicateNode\n  | CaseExpressionNode\n  | CaseWhenNode\n  | CaseElseNode\n  | LimitClauseNode\n  | AllColumnsAsteriskNode\n  | LiteralNode\n  | IdentifierNode\n  | KeywordNode\n  | ParameterNode\n  | OperatorNode\n  | CommaNode\n  | LineCommentNode\n  | BlockCommentNode;\n"],"mappings":"AAEA,WAAYA,QAAZ;;WAAYA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;EAAAA,Q;GAAAA,Q,KAAAA,Q"}